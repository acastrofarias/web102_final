{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Adrian/Documents/web102/web102_final/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Adrian/Documents/web102/web102_final/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Adrian/Documents/web102/web102_final/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import React,{useEffect,useState}from'react';import{useRoutes}from'react-router-dom';import{Link}from'react-router-dom';import{supabase}from'./client.js';import ReadPosts from'./pages/ReadPosts';import CreatePost from'./pages/CreatePost';import EditPost from'./pages/EditPost';import DetailView from'./pages/DetailView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchInput=_useState4[0],setSearchInput=_useState4[1];useEffect(function(){fetchPosts();},[]);var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$supabase$from$,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return supabase.from('hub').select();case 2:_yield$supabase$from$=_context.sent;data=_yield$supabase$from$.data;// set state of posts\nsetPosts(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();useEffect(function(){searchPosts(searchInput).catch(console.error);},[searchInput]);var searchPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(searchInput){var _yield$supabase$from$2,data,error;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(searchInput!==\"\")){_context2.next=9;break;}_context2.next=3;return supabase.from(\"hub\").select().textSearch('title',searchInput).order(\"created_at\",{ascending:true});case 3:_yield$supabase$from$2=_context2.sent;data=_yield$supabase$from$2.data;error=_yield$supabase$from$2.error;setPosts(data);_context2.next=10;break;case 9:fetchPosts();case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function searchPosts(_x){return _ref2.apply(this,arguments);};}();// Sets up routes\nvar element=useRoutes([{path:\"/\",element:/*#__PURE__*/_jsx(ReadPosts,{data:posts})},{path:\"/:id/edit\",element:/*#__PURE__*/_jsx(EditPost,{data:posts})},{path:\"/new\",element:/*#__PURE__*/_jsx(CreatePost,{})},{path:\"/:id\",element:/*#__PURE__*/_jsx(DetailView,{data:posts})}]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"TTRPG Hub\"}),/*#__PURE__*/_jsx(\"div\",{className:\"searchBar\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search...\",onChange:function onChange(inputString){return setSearchInput(inputString.target.value);}})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{className:\"headerBtn\",children:\" Home \"})}),/*#__PURE__*/_jsx(Link,{to:\"/new\",children:/*#__PURE__*/_jsx(\"button\",{className:\"headerBtn\",children:\" Post \"})})]})]}),element]});};export default App;","map":{"version":3,"names":["React","useEffect","useState","useRoutes","Link","supabase","ReadPosts","CreatePost","EditPost","DetailView","App","posts","setPosts","searchInput","setSearchInput","fetchPosts","from","select","data","searchPosts","catch","console","error","textSearch","order","ascending","element","path","inputString","target","value"],"sources":["C:/Users/Adrian/Documents/web102/web102_final/client/src/App.js"],"sourcesContent":["import './App.css';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRoutes } from 'react-router-dom'\r\nimport { Link } from 'react-router-dom'\r\nimport { supabase } from './client.js'\r\nimport ReadPosts from './pages/ReadPosts'\r\nimport CreatePost from './pages/CreatePost'\r\nimport EditPost from './pages/EditPost'\r\nimport DetailView from './pages/DetailView'\r\n\r\n\r\n\r\nconst App = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [searchInput, setSearchInput] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetchPosts();\r\n  }, [])\r\n\r\n  const fetchPosts = async () => {\r\n    const {data} = await supabase\r\n    .from('hub')\r\n    .select()\r\n    // set state of posts\r\n    setPosts(data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    searchPosts(searchInput).catch(console.error);\r\n  }, [searchInput]);\r\n\r\n  const searchPosts = async (searchInput) => {\r\n      if (searchInput !== \"\"){\r\n          const { data, error } = await supabase\r\n              .from(\"hub\")\r\n              .select()\r\n              .textSearch('title', searchInput)\r\n              .order(\"created_at\", { ascending: true });\r\n              setPosts(data);\r\n      }\r\n      else{\r\n          fetchPosts();\r\n      }\r\n  }\r\n\r\n  // Sets up routes\r\n  let element = useRoutes([\r\n    {\r\n      path: \"/\",\r\n      element:<ReadPosts data={posts}/>\r\n    },\r\n    {\r\n      path:\"/:id/edit\",\r\n      element: <EditPost data={posts} />\r\n    },\r\n    {\r\n      path:\"/new\",\r\n      element: <CreatePost />\r\n    },\r\n    {\r\n      path:\"/:id\",\r\n      element: <DetailView data={posts}/>\r\n    }\r\n  ]);\r\n\r\n  return ( \r\n\r\n    <div className=\"App\">\r\n\r\n      <div className=\"header\">\r\n        <h2>TTRPG Hub</h2>\r\n\r\n        <div className='searchBar'> \r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search...\"\r\n            onChange={(inputString) => setSearchInput(inputString.target.value)}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <Link to=\"/\"><button className=\"headerBtn\"> Home </button></Link>\r\n          <Link to=\"/new\"><button className=\"headerBtn\"> Post </button></Link>\r\n        </div>\r\n        \r\n      </div>\r\n        {element}\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"8aAAA,MAAO,WAAP,CACA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,QAAT,KAAyB,aAAzB,CACA,MAAOC,UAAP,KAAsB,mBAAtB,CACA,MAAOC,WAAP,KAAuB,oBAAvB,CACA,MAAOC,SAAP,KAAqB,kBAArB,CACA,MAAOC,WAAP,KAAuB,oBAAvB,C,wFAIA,GAAMC,IAAG,CAAG,QAANA,IAAM,EAAM,CAChB,cAA0BR,QAAQ,CAAC,EAAD,CAAlC,wCAAOS,KAAP,eAAcC,QAAd,eACA,eAAsCV,QAAQ,CAAC,EAAD,CAA9C,yCAAOW,WAAP,eAAoBC,cAApB,eAEAb,SAAS,CAAC,UAAM,CACdc,UAAU,GACX,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMA,WAAU,4FAAG,0LACIV,SAAQ,CAC5BW,IADoB,CACf,KADe,EAEpBC,MAFoB,EADJ,4CACVC,IADU,uBACVA,IADU,CAIjB;AACAN,QAAQ,CAACM,IAAD,CAAR,CALiB,sDAAH,kBAAVH,WAAU,0CAAhB,CAQAd,SAAS,CAAC,UAAM,CACdkB,WAAW,CAACN,WAAD,CAAX,CAAyBO,KAAzB,CAA+BC,OAAO,CAACC,KAAvC,EACD,CAFQ,CAEN,CAACT,WAAD,CAFM,CAAT,CAIA,GAAMM,YAAW,6FAAG,kBAAON,WAAP,mKACZA,WAAW,GAAK,EADJ,kDAEkBR,SAAQ,CACjCW,IADyB,CACpB,KADoB,EAEzBC,MAFyB,GAGzBM,UAHyB,CAGd,OAHc,CAGLV,WAHK,EAIzBW,KAJyB,CAInB,YAJmB,CAIL,CAAEC,SAAS,CAAE,IAAb,CAJK,CAFlB,8CAEJP,IAFI,wBAEJA,IAFI,CAEEI,KAFF,wBAEEA,KAFF,CAORV,QAAQ,CAACM,IAAD,CAAR,CAPQ,+BAUZH,UAAU,GAVE,yDAAH,kBAAXI,YAAW,6CAAjB,CAcA;AACA,GAAIO,QAAO,CAAGvB,SAAS,CAAC,CACtB,CACEwB,IAAI,CAAE,GADR,CAEED,OAAO,cAAC,KAAC,SAAD,EAAW,IAAI,CAAEf,KAAjB,EAFV,CADsB,CAKtB,CACEgB,IAAI,CAAC,WADP,CAEED,OAAO,cAAE,KAAC,QAAD,EAAU,IAAI,CAAEf,KAAhB,EAFX,CALsB,CAStB,CACEgB,IAAI,CAAC,MADP,CAEED,OAAO,cAAE,KAAC,UAAD,IAFX,CATsB,CAatB,CACEC,IAAI,CAAC,MADP,CAEED,OAAO,cAAE,KAAC,UAAD,EAAY,IAAI,CAAEf,KAAlB,EAFX,CAbsB,CAAD,CAAvB,CAmBA,mBAEE,aAAK,SAAS,CAAC,KAAf,wBAEE,aAAK,SAAS,CAAC,QAAf,wBACE,iCADF,cAGE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,WAFd,CAGE,QAAQ,CAAE,kBAACiB,WAAD,QAAiBd,eAAc,CAACc,WAAW,CAACC,MAAZ,CAAmBC,KAApB,CAA/B,EAHZ,EADF,EAHF,cAWE,oCACE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,uBAAa,eAAQ,SAAS,CAAC,WAAlB,oBAAb,EADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,MAAT,uBAAgB,eAAQ,SAAS,CAAC,WAAlB,oBAAhB,EAFF,GAXF,GAFF,CAmBKJ,OAnBL,GAFF,CAyBD,CA/ED,CAiFA,cAAehB,IAAf"},"metadata":{},"sourceType":"module"}