{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Adrian/Documents/web102/web102_final/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Adrian/Documents/web102/web102_final/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Adrian/Documents/web102/web102_final/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Component,useEffect,useState}from\"react\";import{supabase}from'../client.js';import{useParams}from\"react-router-dom\";import{Link}from'react-router-dom';import Posted from'../components/Posted.jsx';import more from'../components/more.png';import'./DetailView.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DetailView=function DetailView(_ref){var data=_ref.data;var _useParams=useParams(),id=_useParams.id;var _useState=useState(data.filter(function(item){return item.id==id;})[0]),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(post.upvotes),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var updateCount=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return supabase.from('hub').update({upvotes:count+1}).eq('id',id);case 2:// Update State Variable\nsetCount(function(count){return count+1;});case 3:case\"end\":return _context.stop();}}},_callee);}));return function updateCount(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"DetailView\",children:[/*#__PURE__*/_jsx(Posted,{created_at:post.created_at}),/*#__PURE__*/_jsx(Link,{to:'/'+id+'/edit',children:/*#__PURE__*/_jsx(\"img\",{className:\"moreButton\",alt:\"edit button\",src:more})}),/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:post.title}),/*#__PURE__*/_jsx(\"p\",{className:\"content\",children:post.content}),/*#__PURE__*/_jsx(\"img\",{className:\"image_url\",src:post.image_url}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"button\",{className:\"betButton\",onClick:updateCount,children:[\"\\uD83D\\uDC4D Upvote: \",count]})]});};export default DetailView;","map":{"version":3,"names":["React","Component","useEffect","useState","supabase","useParams","Link","Posted","more","DetailView","data","id","filter","item","post","setPost","upvotes","count","setCount","updateCount","event","from","update","eq","created_at","title","content","image_url"],"sources":["C:/Users/Adrian/Documents/web102/web102_final/client/src/pages/DetailView.jsx"],"sourcesContent":["import React, { Component, useEffect, useState } from \"react\";\r\nimport { supabase } from '../client.js'\r\nimport { useParams } from \"react-router-dom\"\r\nimport { Link } from 'react-router-dom'\r\nimport Posted from '../components/Posted.jsx'\r\nimport more from '../components/more.png'\r\nimport './DetailView.css'\r\n\r\nconst DetailView = ({data}) => {\r\n  const {id} = useParams();    \r\n  const [post, setPost] = useState(data.filter(item => item.id == id)[0]);\r\n\r\n  const [count, setCount] = useState(post.upvotes)\r\n\r\n  const updateCount = async (event) => {\r\n    await supabase\r\n    .from('hub')\r\n    .update({ upvotes: count + 1})\r\n    .eq('id', id)\r\n\r\n    // Update State Variable\r\n    setCount((count) => count + 1);\r\n  }\r\n\r\n\r\n\r\n  return(\r\n    <div className='DetailView'>\r\n        <Posted created_at={post.created_at} />\r\n        <Link to={'/'+ id + '/edit'}><img className=\"moreButton\" alt=\"edit button\" src={more} /></Link>\r\n\r\n        <h2 className=\"title\">{post.title}</h2> \r\n\r\n        <p className=\"content\">{post.content}</p>\r\n        <img className=\"image_url\" src={post.image_url} />\r\n        <br></br>\r\n\r\n        <button className=\"betButton\" onClick={updateCount} >üëç Upvote: {count}</button>\r\n    </div>\r\n  ); \r\n};\r\n\r\nexport default DetailView;"],"mappings":"8aAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,SAA3B,CAAsCC,QAAtC,KAAsD,OAAtD,CACA,OAASC,QAAT,KAAyB,cAAzB,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,OAAP,KAAmB,0BAAnB,CACA,MAAOC,KAAP,KAAiB,wBAAjB,CACA,MAAO,kBAAP,C,wFAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,MAAY,IAAVC,KAAU,MAAVA,IAAU,CAC7B,eAAaL,SAAS,EAAtB,CAAOM,EAAP,YAAOA,EAAP,CACA,cAAwBR,QAAQ,CAACO,IAAI,CAACE,MAAL,CAAY,SAAAC,IAAI,QAAIA,KAAI,CAACF,EAAL,EAAWA,EAAf,EAAhB,EAAmC,CAAnC,CAAD,CAAhC,wCAAOG,IAAP,eAAaC,OAAb,eAEA,eAA0BZ,QAAQ,CAACW,IAAI,CAACE,OAAN,CAAlC,yCAAOC,KAAP,eAAcC,QAAd,eAEA,GAAMC,YAAW,6FAAG,iBAAOC,KAAP,0IACZhB,SAAQ,CACbiB,IADK,CACA,KADA,EAELC,MAFK,CAEE,CAAEN,OAAO,CAAEC,KAAK,CAAG,CAAnB,CAFF,EAGLM,EAHK,CAGF,IAHE,CAGIZ,EAHJ,CADY,QAMlB;AACAO,QAAQ,CAAC,SAACD,KAAD,QAAWA,MAAK,CAAG,CAAnB,EAAD,CAAR,CAPkB,sDAAH,kBAAXE,YAAW,6CAAjB,CAYA,mBACE,aAAK,SAAS,CAAC,YAAf,wBACI,KAAC,MAAD,EAAQ,UAAU,CAAEL,IAAI,CAACU,UAAzB,EADJ,cAEI,KAAC,IAAD,EAAM,EAAE,CAAE,IAAKb,EAAL,CAAU,OAApB,uBAA6B,YAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAC,aAAhC,CAA8C,GAAG,CAAEH,IAAnD,EAA7B,EAFJ,cAII,WAAI,SAAS,CAAC,OAAd,UAAuBM,IAAI,CAACW,KAA5B,EAJJ,cAMI,UAAG,SAAS,CAAC,SAAb,UAAwBX,IAAI,CAACY,OAA7B,EANJ,cAOI,YAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAEZ,IAAI,CAACa,SAArC,EAPJ,cAQI,aARJ,cAUI,gBAAQ,SAAS,CAAC,WAAlB,CAA8B,OAAO,CAAER,WAAvC,mCAAiEF,KAAjE,GAVJ,GADF,CAcD,CAhCD,CAkCA,cAAeR,WAAf"},"metadata":{},"sourceType":"module"}