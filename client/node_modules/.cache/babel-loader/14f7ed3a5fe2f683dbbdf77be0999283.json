{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Adrian/Documents/web102/web102_final/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Adrian/Documents/web102/web102_final/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Adrian/Documents/web102/web102_final/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Adrian/Documents/web102/web102_final/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Adrian/Documents/web102/web102_final/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useParams}from'react-router-dom';import'./EditPost.css';import{supabase}from'../client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPost=function EditPost(_ref){var data=_ref.data;var _useParams=useParams(),id=_useParams.id;var _useState=useState(data.filter(function(item){return item.id==id;})[0]),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;console.log(\"Name: \",name,\" value: \",value);setPost(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});};var updatePost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return supabase.from('hub').update({title:post.title,content:post.content,image_url:post.image_url}).eq('id',id);case 3:window.location=\"/\";case 4:case\"end\":return _context.stop();}}},_callee);}));return function updatePost(_x){return _ref2.apply(this,arguments);};}();var deletePost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.next=3;return supabase.from('hub').delete().eq('id',id);case 3:window.location=\"http://localhost:3000/\";case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function deletePost(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",id:\"title\",name:\"title\",onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Content\",id:\"content\",name:\"content\",onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Image URL\",id:\"image_url\",name:\"image_url\",onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Edit Post\",onClick:updatePost}),/*#__PURE__*/_jsx(\"button\",{className:\"deleteButton\",onClick:deletePost,children:\"Delete Post\"})]})});};export default EditPost;","map":{"version":3,"names":["React","useState","useParams","supabase","EditPost","data","id","filter","item","post","setPost","handleChange","event","target","name","value","console","log","prev","updatePost","preventDefault","from","update","title","content","image_url","eq","window","location","deletePost","delete"],"sources":["C:/Users/Adrian/Documents/web102/web102_final/client/src/pages/EditPost.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport './EditPost.css'\r\nimport { supabase } from '../client'\r\n\r\nconst EditPost = ({data}) => {\r\n    const {id} = useParams();    \r\n    const [post, setPost] = useState(data.filter(item => item.id == id)[0]);\r\n\r\n    const handleChange = (event) => {\r\n        const {name, value} = event.target;\r\n        console.log(\"Name: \", name, \" value: \", value);\r\n        setPost( (prev) => {\r\n            return {\r\n                ...prev,\r\n                [name]:value,\r\n            }\r\n        })\r\n    }\r\n    \r\n    const updatePost = async (event) => {\r\n        event.preventDefault();\r\n        \r\n        await supabase\r\n        .from('hub')\r\n        .update({ title: post.title, content: post.content, image_url: post.image_url,})\r\n        .eq('id', id);\r\n        \r\n        window.location = \"/\";\r\n    }\r\n\r\n    const deletePost = async (event) => {\r\n        event.preventDefault();\r\n    \r\n        await supabase\r\n        .from('hub')\r\n        .delete()\r\n        .eq('id', id); \r\n    \r\n        window.location = \"http://localhost:3000/\";\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form>\r\n                <input type=\"text\" placeholder=\"Title\" id=\"title\" name=\"title\" onChange={handleChange} /><br />\r\n                <br/>\r\n\r\n                <input type=\"text\" placeholder=\"Content\" id=\"content\" name=\"content\" onChange={handleChange}/><br />\r\n                <br/>\r\n\r\n                <input type=\"text\" placeholder=\"Image URL\" id=\"image_url\" name=\"image_url\" onChange={handleChange}/><br />\r\n                <br/>\r\n\r\n                <input type=\"submit\" value=\"Edit Post\" onClick={updatePost}/>\r\n                <button className=\"deleteButton\" onClick={deletePost}>Delete Post</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\nexport default EditPost"],"mappings":"msBAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,MAAO,gBAAP,CACA,OAASC,QAAT,KAAyB,WAAzB,C,wFAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,MAAY,IAAVC,KAAU,MAAVA,IAAU,CACzB,eAAaH,SAAS,EAAtB,CAAOI,EAAP,YAAOA,EAAP,CACA,cAAwBL,QAAQ,CAACI,IAAI,CAACE,MAAL,CAAY,SAAAC,IAAI,QAAIA,KAAI,CAACF,EAAL,EAAWA,EAAf,EAAhB,EAAmC,CAAnC,CAAD,CAAhC,wCAAOG,IAAP,eAAaC,OAAb,eAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,CAAW,CAC5B,kBAAsBA,KAAK,CAACC,MAA5B,CAAOC,IAAP,eAAOA,IAAP,CAAaC,KAAb,eAAaA,KAAb,CACAC,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBH,IAAtB,CAA4B,UAA5B,CAAwCC,KAAxC,EACAL,OAAO,CAAE,SAACQ,IAAD,CAAU,CACf,sCACOA,IADP,wBAEKJ,IAFL,CAEWC,KAFX,GAIH,CALM,CAAP,CAMH,CATD,CAWA,GAAMI,WAAU,6FAAG,iBAAOP,KAAP,oHACfA,KAAK,CAACQ,cAAN,GADe,sBAGTjB,SAAQ,CACbkB,IADK,CACA,KADA,EAELC,MAFK,CAEE,CAAEC,KAAK,CAAEd,IAAI,CAACc,KAAd,CAAqBC,OAAO,CAAEf,IAAI,CAACe,OAAnC,CAA4CC,SAAS,CAAEhB,IAAI,CAACgB,SAA5D,CAFF,EAGLC,EAHK,CAGF,IAHE,CAGIpB,EAHJ,CAHS,QAQfqB,MAAM,CAACC,QAAP,CAAkB,GAAlB,CARe,sDAAH,kBAAVT,WAAU,6CAAhB,CAWA,GAAMU,WAAU,6FAAG,kBAAOjB,KAAP,wHACfA,KAAK,CAACQ,cAAN,GADe,uBAGTjB,SAAQ,CACbkB,IADK,CACA,KADA,EAELS,MAFK,GAGLJ,EAHK,CAGF,IAHE,CAGIpB,EAHJ,CAHS,QAQfqB,MAAM,CAACC,QAAP,CAAkB,wBAAlB,CARe,wDAAH,kBAAVC,WAAU,8CAAhB,CAWA,mBACI,kCACI,qCACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,OAA/B,CAAuC,EAAE,CAAC,OAA1C,CAAkD,IAAI,CAAC,OAAvD,CAA+D,QAAQ,CAAElB,YAAzE,EADJ,cAC6F,aAD7F,cAEI,aAFJ,cAII,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,SAA/B,CAAyC,EAAE,CAAC,SAA5C,CAAsD,IAAI,CAAC,SAA3D,CAAqE,QAAQ,CAAEA,YAA/E,EAJJ,cAIkG,aAJlG,cAKI,aALJ,cAOI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,WAA/B,CAA2C,EAAE,CAAC,WAA9C,CAA0D,IAAI,CAAC,WAA/D,CAA2E,QAAQ,CAAEA,YAArF,EAPJ,cAOwG,aAPxG,cAQI,aARJ,cAUI,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,WAA3B,CAAuC,OAAO,CAAEQ,UAAhD,EAVJ,cAWI,eAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAEU,UAA1C,yBAXJ,GADJ,EADJ,CAiBH,CAtDD,CAuDA,cAAezB,SAAf"},"metadata":{},"sourceType":"module"}